@model IEnumerable<ArtRoyalDetailing.Domain.Models.Services>
@using ArtRoyalDetailing.Domain.Enum
@{
    ViewData["Title"] = "Услуги";
}

<h1 class="text-center text-change-color">Стоимость услуг</h1>
<style>
    td:hover {
        background-color: rgb(229, 111, 0);
        border-radius:5px;
    }
</style>

@foreach (var type in ViewBag.ServiceTypes)
{
    <h2 class="text-change-color text-center m-2">@type.TypeName | Прайс-лист</h2>
    <div style="overflow: auto; border-radius: 10px; padding: 10px; box-shadow: #3A3C41 0px 0px 10px 10px; opacity: 70%;" class="bg-dark">
        <table class="table table-dark table-sm border-success">

            <thead>
                <tr>
                    <th class="text-center">
                        Наименование услуги/Категория
                    </th>
                    <th class="text-center">
                        Класс A
                    </th>
                    <th class="text-center">
                        Класс B, C, D
                    </th>
                    <th class="text-center">
                        Кроссовер/ Универсал/ Класс E, F
                    </th>
                    <th class="text-center">
                        Внедорожник
                    </th>
                    <th class="text-center">
                        Минивэн
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    if (item.ServiceType == type.IdType)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.ServiceName)
                            </td>
                            @foreach (var cost in (List<ServicesCosts>)ViewBag.ServiceCosts)
                            {
                                if (cost.IdService == item.IdService)
                                {
                                    if (User.IsInRole($"{(int)Role.Admin}"))
                                    {
                                        <td class="text-center">
                                            <input type="text" class="inpService" value="@cost.Cost" onkeyup="changePriceForService(@cost.IdService, '@cost.ClassAuto',this.value)"/>
                                        </td>
                                    }
                                    else
                                    {
                                        <td class="text-center">
                                            @cost.Cost
                                        </td>
                                    }
                                }
                            }
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>

}
<script>
    changePriceForService = (serviceId, carClass, cost) => {
        alert(`${serviceId}/${carClass}/${cost}`)
    }
</script>
